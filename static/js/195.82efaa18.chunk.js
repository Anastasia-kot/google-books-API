"use strict";(self.webpackChunkgooglebooks_mobx=self.webpackChunkgooglebooks_mobx||[]).push([[195],{195:function(e,r,t){t.r(r),t.d(r,{default:function(){return P}});var o=t(791),s=t(951),n=t(672),a=t(381),i="BooksList_mainContentWrapper__sw4sm",c="BooksList_totalBookCount__Vh840",l="BooksList_bookCardsWrapper__piaiY",u=t(514),h="BookCard_bookCard__Mc2vT",d="BookCard_bookCoverWrapper__69M6q",p="BookCard_bookCover__tPEn-",m="BookCard_bookCoverSpan__I-APY",v="BookCard_bookCategory__Vfnme",g="BookCard_bookTitle__CfXa6",k="BookCard_bookAuthor__S5Gkh",_=t(87),x=t(184),f=function(e){var r=e.volumeInfo,t=e.index,o=r.title,s=r.imageLinks,n=r.categories,a=r.authors;return(0,x.jsxs)("li",{className:h,children:[(0,x.jsx)("div",{className:d,children:(0,x.jsx)(_.rU,{to:"/bookPage/"+t,children:null!==s&&void 0!==s&&s.smallThumbnail?(0,x.jsx)("img",{className:p,alt:"Book cover",src:s.smallThumbnail}):(0,x.jsx)("span",{className:m})})}),(0,x.jsx)("div",{className:v,children:(null===n||void 0===n?void 0:n.length)>0?n[0]:"no categories"}),(0,x.jsx)("div",{className:g,children:(0,x.jsx)(_.rU,{to:"/bookPage/"+t,children:o||"no title"})}),(0,x.jsx)("div",{className:k,children:(null===a||void 0===a?void 0:a.length)>0&&a.join(", ")})]})},b=(0,n.Pi)((function(){var e=s.Z.booksTotalCount,r=s.Z.books;return(0,x.jsxs)("div",{className:i,children:[(0,x.jsxs)("div",{className:c,children:["Found ",e||" some "," results"]}),(0,x.jsx)("ul",{className:l,children:r.map((function(e,r){return(0,x.jsx)(f,{volumeInfo:e,index:r},r)}))}),s.Z.isFetching&&(0,x.jsx)(u.Z,{})]})})),j=t(413),Z="LoadMore_loadMoreButton__LkZZi",y=(0,n.Pi)((function(){return(0,x.jsx)("button",{className:Z,disabled:30*(s.Z.currentPage+1)>=(s.Z.booksTotalCount?s.Z.booksTotalCount:0)||s.Z.isFetching,onClick:function(){s.Z.loadMoreBooks((0,j.Z)((0,j.Z)({},s.Z.searchParameters),{},{currentPage:s.Z.currentPage+1}))},children:"Load more"})})),P=(0,n.Pi)((function(){return(0,o.useEffect)((function(){s.Z.getBooks({keyWord:"ReactJS",category:"",sorting:"newest",currentPage:0})}),[]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(a.Z,{}),(0,x.jsx)(b,{}),(0,x.jsx)(y,{})]})}))},951:function(e,r,t){t.d(r,{Z:function(){return m}});var o=t(433),s=t(165),n=t(861),a=t(671),i=t(144),c=t(98),l=t(243),u="&key=AIzaSyCuPJFww6YGX7RzIF1sPyo7hDy9Qe09Uqw";function h(){return d.apply(this,arguments)}function d(){return d=(0,n.Z)((0,s.Z)().mark((function e(){var r,t,o,n,a,i,c,h,d=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>0&&void 0!==d[0]?d[0]:"computers",o=d.length>2&&void 0!==d[2]?d[2]:"newest",a="",(t=d.length>1&&void 0!==d[1]?d[1]:"")&&"all"!==t&&(a="+subject:"+t),i="",(n=d.length>3?d[3]:void 0)&&(i="&startIndex="+30*(n+1)),e.prev=8,e.next=11,l.Z.get("https://www.googleapis.com/books/v1/volumes?q=".concat(r).concat(a,"&orderBy=").concat(o,"&maxResults=30").concat(i).concat(u),{headers:{Accept:"application/json"}});case 11:return c=e.sent,h=c.data,e.abrupt("return",h);case 16:if(e.prev=16,e.t0=e.catch(8),!l.Z.isAxiosError(e.t0)){e.next=23;break}return console.log("error message: ",e.t0.message),e.abrupt("return",e.t0.message);case 23:return console.log("unexpected error: ",e.t0),e.abrupt("return","An unexpected error occurred");case 25:case"end":return e.stop()}}),e,null,[[8,16]])}))),d.apply(this,arguments)}var p=function(){function e(){(0,a.Z)(this,e),this.books=[],this.booksTotalCount=null,this.isFetching=!1,this.searchParameters={keyWord:"ReactJS",category:"",sorting:"newest"},this.currentPage=0,(0,c.ky)(this)}return(0,i.Z)(e,[{key:"setSearchParameters",value:function(e){this.searchParameters=e}},{key:"getBooks",value:function(){var e=(0,n.Z)((0,s.Z)().mark((function e(r){var t,o,n,a,i,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isFetching=!0,t=r.keyWord,o=r.category,n=r.sorting,a=r.currentPage,e.next=4,h(t,o,n,a);case 4:"string"!==typeof(i=e.sent)&&(this.books=null===i||void 0===i||null===(c=i.items)||void 0===c?void 0:c.map((function(e){return e.volumeInfo})),this.booksTotalCount=i.totalItems,this.currentPage=0),this.isFetching=!1;case 7:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"loadMoreBooks",value:function(){var e=(0,n.Z)((0,s.Z)().mark((function e(r){var t,n,a,i,c,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isFetching=!0,t=r.keyWord,n=r.category,a=r.sorting,i=r.currentPage,e.next=4,h(t,n,a,i);case 4:"string"!==typeof(c=e.sent)&&((l=this.books).push.apply(l,(0,o.Z)(c.items.map((function(e){return e.volumeInfo})))),this.currentPage=this.currentPage+1),this.isFetching=!1;case 7:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()}]),e}(),m=new p},381:function(e,r,t){t.d(r,{Z:function(){return k}});var o=t(413),s="SearchForm_searchInputGroup__B2jvX",n="SearchForm_searchInput__Ih5Nx",a="SearchForm_searchLoupButton__cVfA2",i="SearchForm_searchParametersGroup__c77ZS",c="SearchForm_searchParameter__LN1AW",l="SearchForm_select__4HhVg",u=t(887),h=t(672),d=t(951),p=t(184),m=(0,h.Pi)((function(){var e=(0,u.cI)(),r=e.register,t=e.handleSubmit;return(0,p.jsxs)("form",{onSubmit:t((function(e){d.Z.getBooks((0,o.Z)((0,o.Z)({},e),{},{currentPage:0})),d.Z.setSearchParameters(e)})),children:[(0,p.jsxs)("div",{className:s,children:[(0,p.jsx)("input",(0,o.Z)({className:n,placeholder:"Type key word for search",type:"text",defaultValue:""},r("keyWord"))),(0,p.jsx)("button",{className:a,type:"submit",children:"\ud83d\udd0e"})]}),(0,p.jsxs)("div",{className:i,children:[(0,p.jsxs)("label",{className:c,children:["Categories",(0,p.jsxs)("select",(0,o.Z)((0,o.Z)({className:l,defaultValue:"all"},r("category")),{},{children:[(0,p.jsx)("option",{value:"all",children:"All"}),(0,p.jsx)("option",{value:"art",children:"Art"}),(0,p.jsx)("option",{value:"biography",children:"Biography"}),(0,p.jsx)("option",{value:"computers",children:"Computers"}),(0,p.jsx)("option",{value:"history",children:"History"}),(0,p.jsx)("option",{value:"medical",children:"Medical"}),(0,p.jsx)("option",{value:"poetry",children:"Poetry"})]}))]}),(0,p.jsxs)("label",{className:c,children:["Sorting by",(0,p.jsxs)("select",(0,o.Z)((0,o.Z)({className:l,defaultValue:"relevance"},r("sorting")),{},{children:[(0,p.jsx)("option",{value:"relevance",children:"Relevance"}),(0,p.jsx)("option",{value:"newest",children:"Newest"})]}))]})]})]})})),v="Header_headerWrapper__yti57",g="Header_headerTitle__wOZqU",k=function(){return(0,p.jsxs)("div",{className:v,children:[(0,p.jsx)("div",{className:g,children:"Search for books"}),(0,p.jsx)(m,{})]})}}}]);
//# sourceMappingURL=195.82efaa18.chunk.js.map